%main.container
  = link_to :back do
    %i.fa-long-arrow-left.mr-15
      =t('.back_to_result')
  .row
    .col-sm-6
      .product-gallery
        .mb-20
          = image_tag(@book.main_image.url, class: 'img-responsive')
        .images.clearfix
          - @book.images.each do |image|
            %a.img-link
              = image_tag(image.url, class: 'catalog-book_image_show')
    .col-sm-6
      %h1.mt-res-0= @book.name
      %p.lead.small= @book.all_authors
      .row
        .col-xs-12.col-md-4
          %p.h1.in-gold-500.mt-10= t('.book_price', price: @book.price)
        .col-xs-5.col-md-3
          .input-group.general-position
            %a.input-link{href: "#"}
              %i.fa.fa-minus.line-height-40
            %input.form-control.quantity-input{type: "text", placeholder: @book.quantity}
            %a.input-link{href: "#"}
              %i.fa.fa-plus.line-height-40
        .col-xs-7.col-md-5
          %button.btn.btn-default.pull-right.general-position= t('.add_to_card')
      .general-info-wrap.divider-lg
        %p= t('.description_title')
        %p.lead.small.line-height-2
        - if @book.description.length > BookDecorator::SHORT_DESCRIPTION_LENGTH
          %div#book_description_short
            = h markdown(@book.short_description).html_safe
        -else
          = h markdown(@book.description).html_safe
        %div#book_description_all.hide_description
          = h markdown(@book.description).html_safe
        -if @book.description.length > BookDecorator::SHORT_DESCRIPTION_LENGTH
          %button.b-n.in-gold-500.ml-10#button_for_view_more= t('.read_more')
      .general-info-wrap.divider-lg
        .clearfix
          %p.pull-left= t('.year_of_publication')
          %p.lead.small.pull-right= @book.year_of_publication
      .general-info-wrap.divider-lg
        .clearfix
          %p.pull-left= t('.dimensions_title')
          %p.lead.small.pull-right= @book.dimensions
      .general-info-wrap.divider-lg
        .clearfix
          %p.pull-left= t('.materials_title')
          %p.lead.small.pull-right= @book.materials
.mb-80
  = render partial: 'books/partials/reviews', locals: { reviews: @reviews, max_rating: ReviewForm::MAX_RATING }
- if current_user
  .mb-80
    = render partial: 'books/partials/write_review', locals: { book: @book, rating_range: ReviewForm::RATING_RANGE }
- else 
  %h3.in-gold-500.mb-25= t('.message_review_for_not_authorized')
  = link_to t('devise.default.log_in'), new_user_session_path
